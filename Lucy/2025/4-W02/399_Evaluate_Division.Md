# 399. Evaluate Division

## ë¬¸ì œ ì •ë³´

- URL: [399. Evaluate Division í’€ì–´ë³´ê¸°](https://leetcode.com/problems/evaluate-division/description/?envType=study-plan-v2&envId=leetcode-75)
- LEVEL: Medium
- TOPICS: Array, String, Depth-First Search, Breadth-First Search, Union Find, Graph, Shortest Path

## ë¬¸ì œ íšŒê³ 

### ğŸ’¡ ì–´ë–¤ ë¬¸ì œì¸ê°€ìš”?

ì´ë²ˆ ë¬¸ì œëŠ” ë‘ ë³€ìˆ˜ ê°„ì˜ ë‚˜ëˆ—ì…ˆ ê´€ê³„ë¥¼ ê·¸ë˜í”„ í˜•íƒœë¡œ êµ¬ì„±í•´ì„œ, ì£¼ì–´ì§„ ì¿¼ë¦¬ì— ëŒ€í•´ `A / B = ?`ì˜ ê°’ì„ êµ¬í•˜ëŠ” ë¬¸ì œì…ë‹ˆë‹¤. ì¦‰, `a / b = 2.0, b / c = 3.0`ì´ë¼ëŠ” ì •ë³´ê°€ ì£¼ì–´ì¡Œë‹¤ë©´, `a / c = 6.0`ì´ ë˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

### ğŸ’­ ì²˜ìŒì—” ì–´ë–»ê²Œ ìƒê°í–ˆë‚˜ìš”?

ì²˜ìŒ ë¬¸ì œë¥¼ ë´¤ì„ ë•, â€œì´ê±¸ ì–´ë–»ê²Œ ê·¸ë˜í”„ë¡œ í‘œí˜„í•˜ì§€?â€ë¼ëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤. Chat GPTì— ì§ˆë¬¸ì„ í•˜ì—¬ `a / b = 2.0`ì„ `a â†’ b (2.0)`ìœ¼ë¡œ, ê·¸ë¦¬ê³  ë™ì‹œì— `b â†’ a (1 / 2.0)`ìœ¼ë¡œ í‘œí˜„í•˜ë©´ ë˜ê² ë‹¤ëŠ” ì•„ì´ë””ì–´ë¥¼ ë– ì˜¬ë¦´ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì´ê±¸ ê°€ì¤‘ì¹˜ê°€ ìˆëŠ” ì–‘ë°©í–¥ ê·¸ë˜í”„ë¡œ êµ¬ì„±í•´ì•¼ê² ë‹¤ê³  ìƒê°í–ˆìŠµë‹ˆë‹¤.

### ğŸ§© ì–´ë–»ê²Œ í’€ì´í–ˆë‚˜ìš”?

1. ê·¸ë˜í”„ êµ¬ì„±

- ë¨¼ì €, ì£¼ì–´ì§„ equationsì™€ valuesë¥¼ ë°”íƒ•ìœ¼ë¡œ ê°€ì¤‘ì¹˜ê°€ ìˆëŠ” ë°©í–¥ ê·¸ë˜í”„ë¥¼ ë§Œë“­ë‹ˆë‹¤.
- ê° ë³€ìˆ˜ëŠ” ë…¸ë“œ, ê° ì‹ì€ ì–‘ë°©í–¥ ê°„ì„ ìœ¼ë¡œ í‘œí˜„í•©ë‹ˆë‹¤.
  - ì˜ˆë¥¼ ë“¤ì–´ a / b = 2.0ì´ë©´ a â†’ bëŠ” ê°€ì¤‘ì¹˜ 2.0, b â†’ aëŠ” ê°€ì¤‘ì¹˜ 1/2.0ì¸ ê°„ì„ ì„ ì¶”ê°€í•©ë‹ˆë‹¤.
  - ì´ì²˜ëŸ¼ ì–‘ë°©í–¥ìœ¼ë¡œ ì—°ê²°í•¨ìœ¼ë¡œì¨ ë‚˜ì¤‘ì— DFSë¡œ ì–´ëŠ ë°©í–¥ì´ë“  íƒìƒ‰í•  ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.

```typescript
const graph = new Map<string, [string, number][]>();

const addEdge = (from: string, to: string, weight: number) => {
  if (!graph.has(from)) graph.set(from, []);

  const neighbors = graph.get(from);
  if (neighbors) neighbors.push([to, weight]);
};

for (let i = 0; i < equations.length; i++) {
  const [from, to] = equations[i];
  const weight = values[i];

  addEdge(from, to, weight);
  addEdge(to, from, 1 / weight);
}
```

2. DFSë¡œ ì¿¼ë¦¬ íƒìƒ‰

- queriesì˜ ê° ìŒ [C, D]ì— ëŒ€í•´, DFS ë°©ì‹ìœ¼ë¡œ Cì—ì„œ Dê¹Œì§€ì˜ ê²½ë¡œë¥¼ íƒìƒ‰í•©ë‹ˆë‹¤.
- íƒìƒ‰í•˜ëŠ” ë™ì•ˆ, ê²½ë¡œ ìƒì˜ ê°„ì„  ê°€ì¤‘ì¹˜ë¥¼ ê³„ì† ëˆ„ì  ê³±í•˜ë©´ì„œ ê³„ì‚°í•©ë‹ˆë‹¤.
- ë§Œì•½ Cì—ì„œ Dê¹Œì§€ì˜ ê²½ë¡œê°€ ì¡´ì¬í•œë‹¤ë©´, ëˆ„ì  ê³±ì„ ê²°ê³¼ë¡œ ë°˜í™˜í•˜ê³ , ê²½ë¡œê°€ ì—†ê±°ë‚˜ ë³€ìˆ˜ ìì²´ê°€ ì—†ìœ¼ë©´ -1.0ì„ ë°˜í™˜í•©ë‹ˆë‹¤.
- ê°™ì€ ë³€ìˆ˜ ìŒì´ë¼ë©´(C == D) 1.0ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

```typescript
const UNDEFINED_RESULT = -1.0;

const queryResults: number[] = [];

const dfs = (current: string, target: string, visited: Set<string>, product: number): number => {
  if (!graph.has(current)) return UNDEFINED_RESULT;
  if (current === target) return product;

  visited.add(current);

  for (const [next, weight] of graph.get(current)!) {
    if (!visited.has(next)) {
      const result = dfs(next, target, visited, product * weight);
      if (result !== UNDEFINED_RESULT) return result;
    }
  }

  return UNDEFINED_RESULT;
};

for (const [C, D] of queries) {
  if (!graph.has(C) || !graph.has(D)) {
    queryResults.push(UNDEFINED_RESULT);
  } else if (C === D) {
    queryResults.push(1);
  } else {
    const visited = new Set<string>();
    const result = dfs(C, D, visited, 1);
    queryResults.push(result);
  }
}
```

3. ì¿¼ë¦¬ ê²°ê³¼ ë°˜í™˜

- ìœ„ ê³¼ì •ì„ í†µí•´ ê° ì¿¼ë¦¬ì˜ ë‹µì„ ë°°ì—´ì— ì €ì¥í•˜ê³ , ìµœì¢…ì ìœ¼ë¡œ ëª¨ë“  ì¿¼ë¦¬ì— ëŒ€í•œ ê²°ê³¼ ë°°ì—´ì„ ë°˜í™˜í•©ë‹ˆë‹¤.

```typescript
return queryResults;
```

#### ê·¸ë¦¼ìœ¼ë¡œ ì„¤ëª…

![Image](https://github.com/user-attachments/assets/fe607027-b622-4b1d-9e08-ea862dba0e0a)

### ğŸ¤” íšŒê³ 

ì²˜ìŒì—ëŠ” ì‹ì„ ê·¸ë˜í”„ë¡œ ì–´ë–»ê²Œ ë³€í™˜í•´ì•¼ í• ì§€ ë§‰ë§‰í–ˆì§€ë§Œ, â€˜ê·¸ë˜í”„ë¡œ ì¹˜í™˜í•´ì„œ ìƒê°í•´ë³´ê¸°â€™ë¼ëŠ” ì•„ì´ë””ì–´ë¥¼ í†µí•´ ë¬¸ì œë¥¼ í’€ì´í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. í•´ë‹¹ ë¬¸ì œë¥¼ í’€ì–´ë³´ë©´ì„œ í”¼ì—°ì‚°ì(ë³€ìˆ˜ A, B)ë¥¼ ë…¸ë“œë¡œ ì—°ì‚°ëœ ê°’(ë‚˜ëˆ—ì…ˆ ê°’)ì„ ê°€ì¤‘ì¹˜ë¡œ ìƒê°í•  ìˆ˜ë„ ìˆêµ¬ë‚˜ë¥¼ ë°°ìš¸ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
